# athena-dhcpd — Minimal Configuration
#
# Only [server] and [api] are read from this file (bootstrap config).
# Everything else (subnets, defaults, DNS, hooks, etc.) is stored in the
# database and managed through the web UI. Settings below are imported
# into the DB on first startup and can then be changed live from the UI.

# ─── Bootstrap (required) ───────────────────────────────────────────

[server]
log_level = "info"
lease_db = "/var/lib/athena-dhcpd/leases.db"

[api]
enabled = true
listen = "0.0.0.0:8067"
web_ui = true

# ─── High Availability (optional) ──────────────────────────────────
# Uncomment to enable active-standby failover with automatic config sync.
# Each node needs its own [ha] section pointing at the other node.
# Config (subnets, DNS, hooks, etc.) syncs automatically between peers.

# [ha]
# enabled = true
# role = "primary"                 # "primary" or "secondary"
# peer_address = "10.0.0.2:8068"  # the other node's HA listen address
# listen_address = "0.0.0.0:8068"
# heartbeat_interval = "1s"
# failover_timeout = "10s"
# sync_batch_size = 100
#
#   [ha.tls]
#   enabled = false
#   cert_file = "/etc/athena-dhcpd/tls/server.crt"
#   key_file = "/etc/athena-dhcpd/tls/server.key"
#   ca_file = "/etc/athena-dhcpd/tls/ca.crt"

# ─── Imported into DB on first run ──────────────────────────────────

[defaults]
lease_time = "1h"
dns_servers = ["1.1.1.1", "8.8.8.8"]

[conflict_detection]
enabled = true
probe_timeout = "500ms"
send_gratuitous_arp = true
icmp_fallback = true

[dns]
enabled = true
listen_udp = "0.0.0.0:53"
forwarders = ["1.1.1.1", "8.8.8.8"]
cache_size = 10000
cache_ttl = "5m"

[[subnet]]
network = "192.168.1.0/24"
interface = "eth0"
routers = ["192.168.1.1"]
lease_time = "1h"

  [[subnet.pool]]
  range_start = "192.168.1.100"
  range_end = "192.168.1.250"
